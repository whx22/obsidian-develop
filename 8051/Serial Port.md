---
aliases:
  - 串口
tags:
  - 51单片机
  - c
  - 串口
  - 通信
summary: 
create time: 2023-12-09T17:29:00
modify time:
---
## 硬件电路

### USB转TTL串口

![[Pasted image 20231209201815.png]]

## 电平标准

电平标准是数据1和数据0的表达方式，是传输线缆中认为规定的电压与数据的对应关系。

1. 正常信号：使用相较于GND电压的叉值表示数据
2. 差分信号：使用两线电压差表示数据，适用与远距离信号传输

## 接口及引脚的定义

1. 数据接口（线路）
2. 流控制接口（线路）
3. 电源接口（线路）

## 常见通信接口比较

|  名称  |       引脚定义       |   通信方式   |        特点        |
|:------:|:--------------------:|:------------:|:------------------:|
|  UART  |       TXD, RXD       | 全双工，异步 |     点对点通信     |
|  IIC   |       SCL, SDA       | 半双工，同步 |   可挂载多个设备   |
|  SPI   | SCLK, MOSI, MISO, CS | 全双工，同步 |   可挂载多个设备   |
| 1-Wire |          DQ          | 半双工，异步 |   可挂载多个设备   |
|  CAN   |                      |              | 差分信号，汽车使用 | 
|  USB   |                      |              |                    |

## 通信的基本概念

### 串行通信与并行通信

### 异步通信与同步通信

### 单工、半双工与全双工通信

### 通信速率

## 51单片机的UART

### 工作模式1

8位UART，波特率可变

#### 串口工作原理图（集成单片机内部）

![[Pasted image 20231209203318.png]]

SBUF：串口数据缓存寄存器，读写缓冲寄存器共享同一个地址（进行读写时分别使用不同物理寄存器），实现接受数据和传输数据时产生不同的中断信号，控制对该地址读或写时使用的实际物理寄存器。

### 串口相关中断系统

![[Interrupt System#中断结构]]

### 串口相关寄存器

![[Pasted image 20231209204845.png]]

#### SCON

#### PCON

## 串口通行代码实现

### 单片机向上位机发送数据

```c
```

### 上位机向单片机发送数据控制LED

```c
```