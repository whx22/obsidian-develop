---
aliases: 
tags:
  - 51单片机
  - 蜂鸣器
  - c
summary: 
create time: 2023-12-17T21:07:00
modify time:
---
## 原理

![[Pasted image 20231217211551.png]]

### 分类

1. 有源蜂鸣器：内部自带振荡源，将正负极接上直流电压即可持续发声，频率固定。
2. 无源蜂鸣器：内部不带振荡源，需要控制器提供振荡脉冲才可以发声，调节提供振荡脉冲的频率，可以发出不同频率的声音。

## 驱动电路

对于功率较大器件，IO口驱动能力有限，需要额为驱动电路（电路放大器）驱动器件工作。

#### 三级管驱动

工作在截至状态（断开）和饱和状态（连通）

##### NPN型晶体管

![[Pasted image 20231217213336.png]]

##### PNP型晶体管

![[Pasted image 20231217213413.png]]

#### 集成电路驱动

![[Pasted image 20231217213252.png]]

##### ULN2003D驱动芯片

达林顿晶体管阵列

[ULN2003中文资料](./attachments/ULN2003中文资料)

![[Pasted image 20231218185943.png]]

###### 应用电路

![[Pasted image 20231218190234.png]]

## 乐理

[[乐理]]

![[Pasted image 20231218192118.png]]

[各频率声音对应重装载值](./attachments/sound.xlsx)

## 代码

### 蜂鸣器播放提示音

#### Buzzer.h

```c
#ifndef __BUZZER_H__
#define __BUZZER_H__

void Buzzer_Time(unsigned int ms);

#endif // __BUZZER_H__
```

#### Buzzer.c

```c
#include <REGX52.H>
#include <INTRINS.H>

/**
 * @brief	单片机通过P2^5端口控制ULN2003D驱动芯片驱动控制蜂鸣器发声
 */
sbit Buzzer = P2^5;

/**
 * @brief	蜂鸣器私有延时函数，延时500us，频率2000Hz
 * @param	无
 * @retval 	无
 */
void Buzzer_Delay500us()		//@12.000MHz
{
	unsigned char i;

	_nop_(); // 延时一个机器周期，head file: INTRINS.H
	i = 247;
	while (--i);
}

/**
 * @brief	蜂鸣器鸣响对应时间
 * @param	蜂鸣器鸣响时间（单位：ms）
 * @retval 	无
 */
void Buzzer_Time(unsigned int ms) {
	unsigned int i;
	for (i = 0; i < ms * 2; ++i) { // 翻转ms * 2次，蜂鸣器工作ms(ms)
		Buzzer = ~Buzzer;
		Buzzer_Delay500us(); // 每隔500us翻转1次，周期1ms，频率1000Hz
	}
}
```

#### main.c

```c
#include <REGX52.H>
#include "Delay.h"
#include "Key.h"
#include "Nixie.h"
#include "Buzzer.h"

unsigned char KeyNum;

void main()	{
	Nixie(1, 0);
	while (1) {
		KeyNum = Key();
		if (KeyNum) {
			Buzzer_Time(100);
			Nixie(1, KeyNum);
		}
	}
}
```

### 蜂鸣器播放音乐